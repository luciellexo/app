{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"getDurationTotalMinutes\", {\n    enumerable: true,\n    get: function () {\n      return getDurationTotalMinutes;\n    }\n  });\n  Object.defineProperty(exports, \"getActiveLogs\", {\n    enumerable: true,\n    get: function () {\n      return getActiveLogs;\n    }\n  });\n  var getDurationTotalMinutes = (substance, roaName) => {\n    var roa = substance.roas.find(r => r.name === roaName);\n    if (!roa || !roa.duration || !roa.duration.total) return 240; // Default 4 hours\n\n    var _roa$duration$total = roa.duration.total,\n      max = _roa$duration$total.max,\n      units = _roa$duration$total.units;\n    if (units === 'hours') return max * 60;\n    if (units === 'minutes') return max;\n    return 240;\n  };\n  var getActiveLogs = (logs, substances) => {\n    var now = Date.now();\n    return logs.filter(log => {\n      // If we have substance data, use it, otherwise default 4 hours\n      var duration = 240; // simplified for now if data missing\n      // Ideally we need the substance data for every log to know duration\n      // For MVP, we might assume 4-6 hours or fetch it.\n\n      // Better approach: Store duration in the log at creation time? \n      // Yes, let's store 'estimatedDurationMinutes' in the log.\n      var logDuration = log.estimatedDurationMinutes || 240;\n      return log.timestamp + logDuration * 60 * 1000 > now;\n    });\n  };\n});","lineCount":44,"map":[[7,2,3,0,"Object"],[7,8,3,0],[7,9,3,0,"defineProperty"],[7,23,3,0],[7,24,3,0,"exports"],[7,31,3,0],[8,4,3,0,"enumerable"],[8,14,3,0],[9,4,3,0,"get"],[9,7,3,0],[9,18,3,0,"get"],[9,19,3,0],[10,6,3,0],[10,13,3,0,"getDurationTotalMinutes"],[10,36,3,0],[11,4,3,0],[12,2,3,0],[13,2,13,0,"Object"],[13,8,13,0],[13,9,13,0,"defineProperty"],[13,23,13,0],[13,24,13,0,"exports"],[13,31,13,0],[14,4,13,0,"enumerable"],[14,14,13,0],[15,4,13,0,"get"],[15,7,13,0],[15,18,13,0,"get"],[15,19,13,0],[16,6,13,0],[16,13,13,0,"getActiveLogs"],[16,26,13,0],[17,4,13,0],[18,2,13,0],[19,2,3,7],[19,6,3,13,"getDurationTotalMinutes"],[19,29,3,36],[19,32,3,39,"getDurationTotalMinutes"],[19,33,3,40,"substance"],[19,42,3,60],[19,44,3,62,"roaName"],[19,51,3,77],[19,56,3,90],[20,4,4,2],[20,8,4,8,"roa"],[20,11,4,11],[20,14,4,14,"substance"],[20,23,4,23],[20,24,4,24,"roas"],[20,28,4,28],[20,29,4,29,"find"],[20,33,4,33],[20,34,4,34,"r"],[20,35,4,35],[20,39,4,39,"r"],[20,40,4,40],[20,41,4,41,"name"],[20,45,4,45],[20,50,4,50,"roaName"],[20,57,4,57],[20,58,4,58],[21,4,5,2],[21,8,5,6],[21,9,5,7,"roa"],[21,12,5,10],[21,16,5,14],[21,17,5,15,"roa"],[21,20,5,18],[21,21,5,19,"duration"],[21,29,5,27],[21,33,5,31],[21,34,5,32,"roa"],[21,37,5,35],[21,38,5,36,"duration"],[21,46,5,44],[21,47,5,45,"total"],[21,52,5,50],[21,54,5,52],[21,61,5,59],[21,64,5,62],[21,65,5,63],[21,66,5,64],[23,4,7,2],[23,8,7,2,"_roa$duration$total"],[23,27,7,2],[23,30,7,25,"roa"],[23,33,7,28],[23,34,7,29,"duration"],[23,42,7,37],[23,43,7,38,"total"],[23,48,7,43],[24,6,7,10,"max"],[24,9,7,13],[24,12,7,13,"_roa$duration$total"],[24,31,7,13],[24,32,7,10,"max"],[24,35,7,13],[25,6,7,15,"units"],[25,11,7,20],[25,14,7,20,"_roa$duration$total"],[25,33,7,20],[25,34,7,15,"units"],[25,39,7,20],[26,4,8,2],[26,8,8,6,"units"],[26,13,8,11],[26,18,8,16],[26,25,8,23],[26,27,8,25],[26,34,8,32,"max"],[26,37,8,35],[26,40,8,38],[26,42,8,40],[27,4,9,2],[27,8,9,6,"units"],[27,13,9,11],[27,18,9,16],[27,27,9,25],[27,29,9,27],[27,36,9,34,"max"],[27,39,9,37],[28,4,10,2],[28,11,10,9],[28,14,10,12],[29,2,11,0],[29,3,11,1],[30,2,13,7],[30,6,13,13,"getActiveLogs"],[30,19,13,26],[30,22,13,29,"getActiveLogs"],[30,23,13,30,"logs"],[30,27,13,41],[30,29,13,43,"substances"],[30,39,13,80],[30,44,13,85],[31,4,14,2],[31,8,14,8,"now"],[31,11,14,11],[31,14,14,14,"Date"],[31,18,14,18],[31,19,14,19,"now"],[31,22,14,22],[31,23,14,23],[31,24,14,24],[32,4,15,2],[32,11,15,9,"logs"],[32,15,15,13],[32,16,15,14,"filter"],[32,22,15,20],[32,23,15,21,"log"],[32,26,15,24],[32,30,15,28],[33,6,16,4],[34,6,17,4],[34,10,17,10,"duration"],[34,18,17,18],[34,21,17,21],[34,24,17,24],[34,25,17,25],[34,26,17,26],[35,6,18,4],[36,6,19,4],[38,6,21,4],[39,6,22,4],[40,6,23,4],[40,10,23,10,"logDuration"],[40,21,23,21],[40,24,23,24,"log"],[40,27,23,27],[40,28,23,28,"estimatedDurationMinutes"],[40,52,23,52],[40,56,23,56],[40,59,23,59],[41,6,24,4],[41,13,24,12,"log"],[41,16,24,15],[41,17,24,16,"timestamp"],[41,26,24,25],[41,29,24,28,"logDuration"],[41,40,24,39],[41,43,24,42],[41,45,24,44],[41,48,24,47],[41,52,24,51],[41,55,24,55,"now"],[41,58,24,58],[42,4,25,2],[42,5,25,3],[42,6,25,4],[43,2,26,0],[43,3,26,1],[44,0,26,2],[44,3]],"functionMap":{"names":["<global>","getDurationTotalMinutes","substance.roas.find$argument_0","getActiveLogs","logs.filter$argument_0"],"mappings":"AAA;uCCE;kCCC,uBD;CDO;6BGE;qBCE;GDU;CHC"},"hasCjsExports":false},"type":"js/module"}]}